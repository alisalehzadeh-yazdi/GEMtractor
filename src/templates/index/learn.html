{% extends "base.html" %}
{% load static %}
{% block title %}
Learn
{% endblock %}
{% block content %}
<h1>Documentation of the GEMtractor</h1>

<ul>
	<li><a href="#faq">Frequently asked questions</a></li>
	<li><a href="#api">Use the GEMtractor API</a></li>
	<li><a href="#own-gemtractor">Run your own GEMtractor</a></li>
</ul>





<div  class="w3-card w3-flat-clouds w3-margin-top">
  <div class="w3-padding">
    <div class=" anchor-heading">
      <a name="faq" id="faq"></a>
      <h2>Frequently asked and invented questions</h2>
    </div>
    <ul>
      <li><a href="#enzyme-reaction-diff">What's the difference between enzyme-centric and reaction-centric?</a></li>
      <li><a href="#ein-sense">Does it make sense to extract the enzyme-centric network?</a></li>
      <li><a href="#model-support">Which type of models does the GEMtractor support?</a></li>
      <li><a href="#gene-association">How does the GEMtractor identify enzymes that are associated to a reaction?</a></li>
      <li><a href="#gene-names">Why do enzymes have such a strange name?</a></li>
      <li><a href="#no-gene-name">What if no enzyme is associated to a reaction?</a></li>
      <li><a href="#filter-species">What exactly happens when I remove a species during filtering?</a></li>
      <li><a href="#red-species">Why is a certain species highlighted in red?</a></li>
      <li><a href="#filter-reaction">What exactly happens when I remove a reaction during filtering?</a></li>
      <li><a href="#red-reaction">Why is a certain reaction highlighted in red?</a></li>
      <li><a href="#filter-gene">What exactly happens when I remove an enzyme during filtering?</a></li>
      <li><a href="#red-gene">Why is a certain enzyme highlighted in red?</a></li>
      <li><a href="#filter-enzyme-complex">What exactly happens when I remove an enzyme complex during filtering?</a></li>
      <li><a href="#red-enzyme-complex">Why is a certain enzyme complex highlighted in red?</a></li>
      <li><a href="#enzyme-complex">What is an enzyme complex?</a></li>
      <li><a href="#batch-filter">How does the batch filtering work?</a></li>
      <li><a href="#what-currency-metabolites"></a>What are currency metabolites?</li>
      <li><a href="#currency-metabolites">How can I discard currency metabolites (such as H<sup>+</sup>, H<sub>2</sub>O or ATP)?</a></li>
      <li><a href="#which-biomodels">How did the GEMtractor select the models from Biomodels?</a></li>
      <li><a href="#which-bigg">How did the GEMtractor select the models from BiGG?</a></li>
      <li><a href="#stored-data">Which data does the GEMtractor store on the server?</a></li>
      <li><a href="#cookies">Why am I always redirected back to model selection?</a></li>
      <li><a href="#export-options">What are the different export options?</a></li>
      <li><a href="#wrong-directions">Aren't the directions wrong?</a></li>
      <li><a href="#"></a></li>
      <li><a href="#"></a></li>
      <li><a href="#"></a></li>
      <li><a href="#"></a></li>
      <li><a href="#clear-data">How can I clear my data?</a></li>
      <li><a href="#source">Can I look inside the GEMtractor?</a></li>
      <li><a href="#modify-settings">How can I modify the default settings?</a></li>
    </ul>
  </div>
  
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="enzyme-reaction-diff" id="enzyme-reaction-diff"></a>
			<h3>What's the difference between enzyme-centric and reaction-centric?</h3>
		</div>
		<p>
		  see #105
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="ein-sense" id="ein-sense"></a>
			<h3>Does it make sense to extract the enzyme-centric network?</h3>
		</div>
		<p></p>
	</div>
  
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="model-support" id="model-support"></a>
			<h3>Which type of models does the GEMtractor support?</h3>
		</div>
		<p>
            The GEMtractor supports models encoded using the <a href="https://sbml.org/">Systems Biology Markup Language (SBML) format</a>.
            SBML is a standard format for computer models of biological processes.
            You can find many example models at <a href="https://www.ebi.ac.uk/biomodels/">Biomodels</a> or at <a href="http://bigg.ucsd.edu/">BiGG Models</a>.
        </p>
	</div>
  
	<div class="w3-padding w3-card w3-white learn-entry">
	  <div class=" anchor-heading">
		  <a name="gene-association" id="gene-association"></a>
		  <h3>How does the GEMtractor identify enzymes that are associated to a reaction?</h3>
	  </div>
	  <p>
	    Enzymes are based on genes, they are the gene's products.
	    The GEMtractor currently supports two formats of gene associations in SBML documents:
            The legacy SBML-notes annotations, and well-structured annotations using the
            <a href="http://sbml.org/Documents/Specifications/SBML_Level_3/Packages/fbc">FBC package</a> in SBML Level 3 documents.
        </p>
		<p>
            An example of legacy SBML-notes annotations from <a href="https://www.ebi.ac.uk/biomodels/MODEL1011080003">MODEL1011080003</a>, which encodes for the gene combination
            <small><code>438  or  330</code></small>:
        </p>
<pre>
&lt;reaction id="R_METSR_S1" [...]&gt;
	&lt;notes&gt;
		&lt;html:p&gt;<strong>GENE_ASSOCIATION: ( 438  or  330 )</strong>&lt;/html:p&gt;
		&lt;html:p&gt;PROTEIN_ASSOCIATION: MsrA&lt;/html:p&gt;
		&lt;html:p&gt;SUBSYSTEM: S_Amino_Acid_Metabolism&lt;/html:p&gt;
		&lt;html:p&gt;PROTEIN_CLASS:&lt;/html:p&gt;
	&lt;/notes&gt;
	[...]
&lt;/reaction&gt;
</pre>
		<p>
            An example of a well-structured gene associations from <a href="http://bigg.ucsd.edu/models/e_coli_core">e_coli_core</a> using FBC-annotations, which encodes for the gene combination
            <small><code>(G_b3738 and G_b3736 and G_b3737 and G_b3735 and G_b3733 and G_b3731 and G_b3732 and G_b3734) or (G_b3734 and G_b3732 and G_b3731 and G_b3733 and G_b3735 and G_b3737 and G_b3736 and G_b3738 and G_b3739)</code></small>:
        </p>
<pre>
&lt;reaction id="R_ATPS4r" [...]&gt;
	[...]<strong>
	&lt;fbc:geneProductAssociation
	  xmlns:fbc="http://www.sbml.org/sbml/level3/version1/fbc/version2"&gt;
	  &lt;fbc:or sboTerm="SBO:0000174"&gt;
		&lt;fbc:and sboTerm="SBO:0000173"&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3738" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3736" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3737" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3735" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3733" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3731" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3732" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3734" /&gt;
		&lt;/fbc:and&gt;
		&lt;fbc:and sboTerm="SBO:0000173"&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3734" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3732" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3731" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3733" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3735" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3737" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3736" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3738" /&gt;
		  &lt;fbc:geneProductRef fbc:geneProduct="G_b3739" /&gt;
		&lt;/fbc:and&gt;
	  &lt;/fbc:or&gt;
	&lt;/fbc:geneProductAssociation&gt;</strong>
	[...]
&lt;/reaction&gt;
</pre>
	<p>
            The GEMtractor then uses the identifiers of the gene-products to refer to enzymes.
	    Gene products that are combined using a logical&nbsp;<code>or</code> are assumed to be alternatives for a catalysis.
	    Gene products that are combined using a logical&nbsp;<code>and</code> are assumed to build an enzyme complex, in which all enzymes need to be present for a catalysis. Thus, a <code>geneProductAssociation</code> encoding for <code>a and (b or c)</code> means, that the reaction is catalysed by <code>a and b</code> or <code>a and c</code>.
        </p>
	</div>
  
	<div class="w3-padding w3-card w3-white learn-entry">
	  <div class=" anchor-heading">
		  <a name="gene-names" id="gene-names"></a>
		  <h3>Why do enzymes have such a strange name?</h3>
	  </div>
	  <p>
            The enzyme names used by the GEMtractor are actually the gene-products' identifiers as stated in the SBML document
	    Those are typically generated by some kind of software and often just numbered with a optional prefix (such as <code>g1</code>, <code>g2</code>, <code>g3</code>, or <code>b0116</code> etc).
	    To get more information about a certain enzyme, you need to look into the model's SBML code.
	    If you're lucky, the gene product is properly annotated and you'll find links to other resources describing the enzyme.
            See also <a href="#no-gene-name">What if no enzyme is associated to a reaction?</a>
	  </p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="no-gene-name" id="no-gene-name"></a>
			<h3>What if no enzyme is associated to a reaction?</h3>
		</div>
		<p>
            If the GEMtractor cannot find a gene-association, it assumes there is only a single gene and assigns it the identifier of the reaction prefixed with <code>"reaction_"</code>.
	    Thus, you can easily spot <em>fake</em> enzymes.
	    When exporting the model, you may also discard these invented enzymes.
            See also <a href="#gene-association">How does the GEMtractor identify enzymes that are associated to a reaction?</a>
        </p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="filter-species" id="filter-species"></a>
			<h3>What exactly happens when I remove a species during filtering?</h3>
		</div>
		<p>
		  Trimming the species of a model actually means <em>removing species from reactions.</em>
		  That is, trimmed species will not appear in any reaction anymore, but if you export the <em>Metabolite-Reaction Network</em>, they may still appear in the model (as they may still be required by other elements in the model).
		  We call these species <em>ghost species</em>.
		  When exporting your model, you will find an option to entirely remove such ghost species from the model.
		  See also <a href="#export-options">What are the different export options?</a>
		</p>
		<p>
		  If you remove a species from a network, all the reactions that consume or produce this species may now be invalid.
		  Thus, the reactions relying on a removed species will be highlighted in red in the <em>Reactions</em> tab, as you may want to re-evaluate these reactions.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="red-species" id="red-species"></a>
			<h3>Why is a certain species highlighted in red?</h3>
		</div>
		<p>
		  A species is highlighted in red if you trimmed all reaction in which it appeared.
		  So you may want to re-evaluate your filters or trim that species as well.
      In that case, a small info-icon  <i class='fas fa-info-circle' title='demo reason...'></i> will appear behind the species' identifier and you can move your mouse over that icon to get more information.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="filter-reaction" id="filter-reaction"></a>
			<h3>What exactly happens when I remove a reaction during filtering?</h3>
		</div>
		<p>
		  A trimmed reaction will disappear from the original model prior to subsequent conversions.
		  All species and enzymes linked to that reaction (as reactants, products, or gene-association) will be unlinked.
		  Thus, there may be species, enzymes and enzyme complexes, which do not appear in the model anymore.
		  Those left-overs will be hightlighted in red to raise your attention, as you may want to re-evaluate your filters.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="red-reaction" id="red-reaction"></a>
			<h3>Why is a certain reaction highlighted in red?</h3>
		</div>
		<p>
		  There are two reasons why a reaction will be highlighted in red:
		  <ul>
		    <li>One of the species it consumes or produced is trimmed from the model &mdash; so the reaction may be invalid now.</li>
		    <li>All the enzymes or enzyme complexes required to catalyse this reactions are trimmed from the model, thus the reaction probably cannot take place anymore.</li>
		  </ul>
		  In both cases you should double check whether the reaction should still be included in the model.
      A small info-icon  <i class='fas fa-info-circle' title='demo reason...'></i> will appear behind the reaction's identifier and you can move your mouse over that icon to get more information about the reason for the inconsistency.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="filter-gene" id="filter-gene"></a>
			<h3>What exactly happens when I remove an enzyme during filtering?</h3>
		</div>
		<p>
		  If you trim an enzyme from your model, this enzyme will be removed from all reactions that it catalyzes.
		  This may result in the following inconsistencies:
		  <ul>
		    <li>A reaction looses all its enzyme (and probably won't take place anymore).</li>
		    <li>The enzyme is part of an enzyme complex &mdash; thus, you may also need to remove the complex.</li>
		  </ul>
		  The inconsitent reactions or enzyme complexes will be highlighted in red and you should re-evaluate your filters.
		</p>
		<p>
		  When exporting the model, you have the option to remove all reactions without enzymes and to remove complexes that lack an enzyme.
		  See also <a href="#export-options">What are the different export options?</a>
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="red-enzyme" id="red-enzyme"></a>
			<h3>Why is a certain enzyme highlighted in red?</h3>
		</div>
		<p>
		  An enzyme is highlighted in red, if your filters removed all reactions and enzyme complexes in which this enzyme participates.
		  Thus, it is not appearing in the model anymore and you may want to trim it as well.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="filter-enzyme-complex" id="filter-enzyme-complex"></a>
			<h3>What exactly happens when I remove an enzyme complex during filtering?</h3>
		</div>
		<p>
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="red-enzyme-complex" id="red-enzyme-complex"></a>
			<h3>Why is a certain enzyme complex highlighted in red?</h3>
		</div>
		<p></p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="enzyme-complex" id="enzyme-complex"></a>
			<h3>What is an enzyme complex?</h3>
		</div>
		<p></p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="batch-filter" id="batch-filter"></a>
			<h3>How does the batch filtering work?</h3>
		</div>
		<p></p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="what-currency-metabolites" id="what-currency-metabolites"></a>
			<h3>What are currency metabolites?</h3>
		</div>
		<p>
		  See also <a href="#currency-metabolites">How can I discard currency metabolites (such as H<sup>+</sup>, H<sub>2</sub>O or ATP)</a>
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="currency-metabolites" id="currency-metabolites"></a>
			<h3>How can I discard currency metabolites (such as H<sup>+</sup>, H<sub>2</sub>O or ATP)?</h3>
		</div>
		<p>
		  The tables listing the enitities on the filter page are sortable.
		  Thus, you can click the header cell of a column to sort it ascending &mdash; if you click it again, the column will be sorted descending.
		</p>
		<p>
            If you want to discard currency metabolites, you can sort the species table by the occurences.
            This will bring the currency metabolites to the top of the page, making it easy to get rid of them, as shown in this screen shot:
            <img src="{% static 'pics/screenshot-currency-metabolites.png' %}" class="w3-image w3-padding" alt="image of a sorted species table">
	    See also <a href="#what-currency-metabolites">What are currency metabolites?</a>
        </p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="which-biomodels" id="which-biomodels"></a>
			<h3>How did the GEMtractor select the models from Biomodels?</h3>
		</div>
		<p>subset of the search for "genome scale metabolic model" (with approximately 7000 results!)</p>
		<p>however, you can choose basically any model from biomodels by pasting the model id in the input field</p>
		<p>some models do not work, as the gene associations prior to SBML level 3 was just encoding in free text, which is error-prone and often went wrong</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="which-bigg" id="which-bigg"></a>
			<h3>How did the GEMtractor select the models from BiGG?</h3>
		</div>
		<p>
		  The table at the model-selection tab basically lists all available models from <a href="http://bigg.ucsd.edu/models">BiGG Models</a>.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="stored-data" id="stored-data"></a>
			<h3>Which data does the GEMtractor store on the server?</h3>
		</div>
		<p>
		  If accessed through a webserver, it stores the uploaded model (or the model downloaded from BiGG or Biomodels) and some session related settings.
		  To see what the GEMtractor stores about you and how to delete the data it stores head over to the <a href="{% url 'index:imprint' %}#privacy">privacy policy</a>.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="cookies" id="cookies"></a>
			<h3>Why am I always redirected back to model selection?</h3>
		</div>
		<p>
		  You probably do not accept cookies..?
		  The GEMtractor uses sessions to store your settings.
		  These sessions rely on a cookie in your browser.
		  If the GEMtractor doesn't know which model you selected, it won't let you do for filtering or exporting...
		  So you'll always be redirected to model selection.
		</p>
		<p>
		  To learn more on what's stored in your session have a look into the <a href="{% url 'index:imprint' %}#privacy">privacy policy</a>.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="export-options" id="export-options"></a>
			<h3>What are the different export options?</h3>
		</div>
		<p>
		  those are the options....
		  TODO:
		  explain difference between the types "reaction network" and "enzyme network"
		  explain formats
		  and strange check boxes
		  also explain that it may take some seconds to generate the desired file
		  also explain that there may be ghost species
		</p>
		<p>
		  keep the following things in mind:
		  * if you export EN as SBML, the GEMtractor will implicitely create "reactions", which are not really existent... they just indicate links between genes, and thus every reactions consumes exactly one gene and produces exactly one gene.
		  * filter for sub-complexes
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="wrong-directions" id="wrong-directions"></a>
			<h3>Aren't the directions wrong?</h3>
		</div>
		<p>
		  Maybe... And if you think we did a mistake please do not hesitate to contact us!
		</p>
		<p>
		  However, there are some sommon pitfalls.
		  Let's for example have a look at the following Metabolite-Reaction Network<div id="wrong-directions-example" class="learn-graph"></div>
		  <script>
		  var cy = cytoscape({
  container: document.getElementById('wrong-directions-example'),
  elements: [ // list of graph elements to start with
    { data: { id: 'A' } },
    { data: { id: 'B' } },
    { data: { id: 'C' } },
    { data: { id: 'r', source: 'A', target: 'B', label: 'r' } },
    { data: { id: 's', source: 'C', target: 'B', label: 's' } }
  ],

  style: [ // the stylesheet for the graph
    {
      selector: 'node',
      style: {
        'background-color': '#666',
        'label': 'data(id)'
      }
    },

    {
      selector: 'edge',
      style: {
	'label': 'data(label)',
        'width': 3,
	'text-margin-y': -10,
        'line-color': '#ccc',
        'target-arrow-color': '#ccc',
	'curve-style': 'bezier',
        'target-arrow-shape': 'triangle'
      }
    }
  ],
  layout: {
    name: 'grid',
    rows: 1
  }
});</script>
		  which encodes for a reaction <code>r</code> that consumes <code>A</code> and produces <code>B</code>, and another reaction <code>s</code> that consumes <code>C</code> and produces <code>B</code>.
		  Given this network, you could anticipate, that the reaction-centric network contains no edges.
		  However, the SBML code may define <code>s</code> to be <em>reversible</em>!
		  This may only be defined implicitely: In SBML prior to level 3 all reactions are in fact reversible, unless explicitly defined otherwise.
		  Thus, the actual network encoded in the model will look like this:<div id="wrong-directions-example2" class="learn-graph"></div>
		  <script>
		  var cy = cytoscape({
  container: document.getElementById('wrong-directions-example2'),
  elements: [ // list of graph elements to start with
    { data: { id: 'A' } },
    { data: { id: 'B' } },
    { data: { id: 'C' } },
    { data: { id: 'r', source: 'A', target: 'B', label: 'r' } },
    { data: { id: 's', source: 'C', target: 'B', label: 's' } },
    { data: { id: 's2', source: 'B', target: 'C', label: 's' } }
  ],

  style: [ // the stylesheet for the graph
    {
      selector: 'node',
      style: {
        'background-color': '#666',
        'label': 'data(id)'
      }
    },

    {
      selector: 'edge',
      style: {
	'label': 'data(label)',
        'width': 3,
	'text-margin-y': -10,
        'line-color': '#ccc',
        'target-arrow-color': '#ccc',
	'curve-style': 'bezier',
        'target-arrow-shape': 'triangle'
      }
    }
  ],
  layout: {
    name: 'grid',
    rows: 1
  }
});</script>
And suddenly, there is an edge in the reaction-centric network:<div id="wrong-directions-example3" class="learn-graph"></div>
		  <script>
		  var cy = cytoscape({
  container: document.getElementById('wrong-directions-example3'),
  elements: [ // list of graph elements to start with
    { data: { id: 'r' } },
    { data: { id: 's' } },
    { data: { id: 'x', source: 'r', target: 's' } }
  ],

  style: [ // the stylesheet for the graph
    {
      selector: 'node',
      style: {
        'background-color': '#666',
        'label': 'data(id)'
      }
    },

    {
      selector: 'edge',
      style: {
        'width': 3,
	'text-margin-y': -10,
        'line-color': '#ccc',
        'target-arrow-color': '#ccc',
	'curve-style': 'bezier',
        'target-arrow-shape': 'triangle'
      }
    }
  ],
  layout: {
    name: 'grid',
    rows: 1
  }
});</script>
The same also applies to enzyme-centric networks.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="" id=""></a>
			<h3></h3>
		</div>
		<p></p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="" id=""></a>
			<h3></h3>
		</div>
		<p></p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="clear-data" id="clear-data"></a>
			<h3>How can I clear my data?</h3>
		</div>
		<p>
		  To see what the GEMtractor stores about you and how to delete the data it stores head over to the <a href="{% url 'index:imprint' %}#privacy">privacy policy</a>.
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="source" id="source"></a>
			<h3>Can I look inside the GEMtractor?</h3>
		</div>
		<p>
		  Sure - the GEMtractor is free software! :)
		</p>
		<p>
		  We develop the source code at an internal repository, but automatically push updates to the <a href="https://github.com/binfalse/gemtractor">GitHub at binfalse:GEMtractor</a>.
		  We are looking forward for your code contributions, bug reports, and feature requests :)
		</p>
	</div>
	
	<div class="w3-padding w3-card w3-white learn-entry">
		<div class=" anchor-heading">
			<a name="modify-settings" id="modify-settings"></a>
			<h3>How can I modify the default settings?</h3>
		</div>
		<p>
		  The settings of the GEMtractor are controlled through environment variables on the server.
		  Thus, you can only change the settings, when running your own GEMtractor server!
		  Just scroll down to learn how to <a href="#own-gemtractor">run your own GEMtractor</a> &mdash; it's pretty easy.
		</p>
	</div>

</div>

<div class="w3-card w3-flat-clouds w3-margin-top">
  <div class="w3-padding">
    <div class=" anchor-heading">
      <a name="api" id="api"></a>
      <h2>Use the GEMtractor API</h2>
    </div>
  </div>
  
  <div class="w3-padding w3-card w3-white learn-entry">
    <h3>Send Job as JSON</h3>
    <p>
      The API is listening at <code>DOMAIN.URL/api/execute</code> &mdash; it expects a job encoded as JSON and sent via HTTP POST, such as this:
    </p>
    
    <pre>
  {
    "export": {
      "network_type":"mn",
      "network_format":"sbml",
      "remove_reaction_enzymes_removed": False,
      "remove_reaction_missing_species": True,
      "removing_enzyme_removes_complex": True
    },
    "filter": {
      "species": ["h2o", "atp"],
      "reactions": [],
      "enzymes": ["gene_abc"],
      "enzyme_complexes": ["a + b + c", "x + Y", "b_098 + r_abc"],
    },
    "file": "&lt;sbml&gt;...&lt;/sbml&gt;"
  }
    </pre>
    
    <h4>Keys of the job's JSON object</h4>
    <h6>export</h6>
    <p>
      The key <code>export</code> is required, and it must encode for a JSON object containing the following keys:
      <ul>
	<li><code>network_type</code>: String <code>"en"</code> or <code>"mn"</code> &mdash; do you just want the filtered metabolic network (<code>"mn"</code>), or should the GEMtractor return the extracted enzyme network (<code>"en"</code>)?</li>
	<li><code>network_format</code>: String <code>"sbml"</code>, <code>"graphml"</code>, <code>"gml"</code>, or <code>"dot"</code> &mdash; how should the returned network be encoded?</li>
	<li><code>remove_reaction_enzymes_removed</code>: Boolean &mdash; remove reactions, whose enzymes were all removed? (Optional, defaults to <code>true</code>)</li>
	<li><code>discard_fake_enzymes</code>: Boolean &mdash; remove invented enzymes? See <a href="#no-gene-name">What if no enzyme is associated to a reaction?</a> (Optional, defaults to <code>false</code>)</li>
	<li><code>remove_reaction_missing_species</code>: Boolean &mdash; remove reactions, in which at least one species was removed? That is, if you remove a species from a reaction, should the GEMtractor also remove the whole reaction? (Optional, defaults to <code>false</code>)</li>
	<li><code>removing_enzyme_removes_complex</code>: Boolean &mdash; remove enzyme complex, if one of its enzymes was removed? In other words: If you remove an enzyme, should all the complexes in which it participates also been removed? (Optional, defaults to <code>true</code>)</li>
      </ul>
      Scroll up to learn more about the <a href="#export-options">export options</a>.
    </p>
    <h6>filter</h6>
    <p>
      The key <code>filter</code> is optional.
      You just need to provide it, if you want to get rid of some items in the model.
      If provided, it may contain the following keys:
      
      <ul>
	<li><code>species</code>: List of species-identifiers to remove from reactions.</li>
	<li><code>reactions</code>: List of reaction-identifiers to remove from the model.</li>
	<li><code>enzymes</code>: List of gene-identifiers to remove from reactions.</li>
	<li><code>enzyme_complexes</code>: List of enzyme-complex-identifiers to remove from reactions. Every item must contain a string of enzymes in the corresponing enzyme complex joined with the string <code>" + "</code>code>. Thus, if you want to remove the complex formed by the enzymes <code>A23</code> and <code>B_42</code>, you would add <code>"A23 + B_42"</code> to this list.</li>
      </ul>
      
      Every list element is supposed to be a string, which corresponds to the <code>id</code> attribute of the SBML entity.
      However, every list can also be empty.
    </p>
    <h6>file</h6>
    <p>
      The key <code>file</code> is required.
      It must contain the raw SBML code of your input model, including the <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code> prefix.
    </p>
  </div>
  
  <div class="w3-padding w3-card w3-white learn-entry">
    <h3>Expect a response</h3>
    <p>
      Reading, filtering, converting, and exporting may of course take some time, but if the GEMtractor finishes successfullty it will return with an <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success">HTTP response status 200</a> and immeditaly serve the exported content.
    </p>
    <p>
      If the GEMtractor was not successful, you'll get an HTTP status other than 200, for example:
      <ul>
	<li><code>400</code>: Your request was bad, for example the JSON was not well formed or is missing a required key, or the supplied model is not valid SBML.</li>
	<li><code>302</code>: You forgot to send the job as POST data. You'll, thus, be redirected to this section to lear how to fire a job :)</li>
	<li><code>500</code>: There was a problem on the server, e.g. the GEMtractor could not generate the desired file.</li>
      </ul>
      The responded content may give you some hints on what went wrong.
    </p>
  </div>
  
  
  <div class="w3-padding w3-card w3-white learn-entry">
    <h3>Use in your application</h3>
    <p>
      It should be possible to integrate the GEMtractor in any application.
      Some example clients for different languages are supplied with the source code.
      Just have a look into the <a href="https://github.com/binfalse/GEMtractor/tree/master/clients">GitHub repository at binfalse:GEMtractor/clients</a>.
    </p>
  </div>
</div>

<div class="w3-card w3-flat-clouds w3-margin-top">
  <div class="w3-padding">
    <div class=" anchor-heading">
      <a name="own-gemtractor" id="own-gemtractor"></a>
      <h2>Run your own GEMtractor</h2>
    </div>
    <p>
  -> easy setup with advanced privace
  we may restart the service at any time, so be quick filtering ;-)
    </p>
  </div>
  
  <div class="w3-padding w3-card w3-white learn-entry">
	<div class=" anchor-heading">
		<a name="own-settings" id="own-settings"></a>
		<h3>Settings</h3>
	</div>
    <p>
      There are a few environment variables that gives you some control about the behavior of the GEMtractor:
      
      <ul>
	<li><code>DJANGO_DEBUG</code>: Boolean <code>True</code> or <code>False</code> &mdash; should Django run in debug mode? Do not set to 'True' in production! <small>(default: <code>True</code>, currently: <code>{{DJANGO_DEBUG}}</code>)</small></li>
	<li><code>DJANGO_LOG_LEVEL</code>: String <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, or <code>CRITICAL</code> &mdash; what kind of log messages should be reported? <small>(default: <code>True</code>, currently: <code>{{DJANGO_LOG_LEVEL}}</code>)</small></li>
	<li><code>DJANGO_ALLOWED_HOSTS</code>: String &mdash; additional hostname for which GEMtractor should be listening. <small>(currently: <code>{{DJANGO_ALLOWED_HOSTS}}</code>)</small></li>
	<li><code>MAX_ENTITIES_FILTER</code>: Int &mdash; up to how many entities in a model it should allow for filtering in the web browser? Web browsers will die if there are too many entities... <small>(default: <code>100000</code>, currently: <code>{{MAX_ENTITIES_FILTER}}</code>)</small></li>
	<li><code>STORAGE_DIR</code>: Path &mdash; where to store models and exports etc. <small>(default: <code>/tmp/gemtractor-storage/</code>, currently: <code>{{STORAGE_DIR}}</code>)</small></li>
	<li><code>KEEP_UPLOADED</code>: Time in seconds &mdash; how long to keep uploaded files on the server? Everytime an uploaded file is used for filtering or exporting, the age of the file is reset to zero. <small>(default: <code>1.5*60*60</code> = 1.5 hours, currently: <code>{{KEEP_UPLOADED}}</code> seconds)</small></li>
	<li><code>KEEP_GENERATED</code>: Time in seconds &mdash; how long to keep generated files on the server? Generated files are basically only for immediate delivering. <small>(default: <code>10*60</code> = 10 minutes, currently: <code>{{KEEP_GENERATED}}</code> seconds)</small></li>
	<li><code>CACHE_BIGG</code>: Time in seconds &mdash; how long to cache the list of models available from BiGG Models? <small>(default: <code>60*60*24</code> = 24 hours, currently: <code>{{CACHE_BIGG}}</code> seconds)</small></li>
	<li><code>CACHE_BIGG_MODEL</code>: Time in seconds &mdash; how long to cache a single model from BiGG Models? <small>(default: <code>7*60*60*24</code> = 7 days, currently: <code>{{CACHE_BIGG_MODEL}}</code> seconds)</small></li>
	<li><code>CACHE_BIOMODELS</code>: Time in seconds &mdash; how long to cache the search results of models available from Biomodels? <small>(default: <code>60*60*24</code> = 24 hours, currently: <code>{{CACHE_BIOMODELS}}</code> seconds)</small></li>
	<li><code>CACHE_BIOMODELS_MODEL</code>: Time in seconds &mdash; how long to cache a single model from Biomodels? <small>(default: <code>7*60*60*24</code> = 7 days, currently: <code>{{CACHE_BIOMODELS_MODEL}}</code> seconds)</small></li>
      </ul>
      
      There are different ways to set the variables. If you're running the GEMtractor from a shell script, for example, you could do something like that:
    </p>
    <pre>
export CACHE_BIGG=60
export MAX_ENTITIES_FILTER=20000
# [...]
gunicorn --timeout 600 --bind 0.0.0.0:80 gemtractor.wsgi:applicatio</pre>
    <p>
		Thus, the running GEMtractor process will then cache the BiGG Models list for 60 seconds and allow for filtering of models in the browser with up to 20K entities.
	</p>
    <p>
		When using <a href="https://docs.docker.com/compose/">Docker Compose</a>, you would set the variables in the <a href="https://github.com/binfalse/GEMtractor/blob/master/docker-compose.yml">demo docker-compose.yml file</a>, for example:
	</p>
    <pre>
version: '3'
services:
  gemtractor-py:
	[...]
    environment:
        CACHE_BIGG: 60
        MAX_ENTITIES_FILTER: 20000
        [...]</pre>
	
  </div>
</div>
{% endblock %}
